# AutoIntel-Squad 通用工作流程

## 标准工作流程模板

### 阶段1: 指令解析与初始化
1. **接收Dispatcher指令**：解析JSON格式的指令，提取关键参数
2. **提取参数**：
   - `query_keywords`: 搜索关键词列表
   - `instruction`: 详细执行指令
   - `time_range`: 时间范围要求
   - `output_to`: 输出文件路径
   - `timeout`: 超时配置
   - `retry_count`: 重试次数
3. **确认约束**：确认数据真实性原则，特别是禁止模拟数据规则
4. **目录准备**：检查输出目录是否存在，不存在则创建（mkdir -p）

### 阶段2: 搜索执行与数据获取
1. **数据源选择**：按优先级顺序选择数据源
   - 第一优先级：官方渠道（公司官网、技术博客）
   - 第二优先级：权威媒体（专业科技媒体）
   - 第三优先级：备用媒体（综合性媒体）
2. **搜索执行**：
   - 使用WebFetch工具访问真实网站
   - 构造搜索查询：公司名+技术关键词+年份/时间限定
   - 执行搜索，记录访问状态
3. **失败处理**：
   - 官方渠道返回403或超时，立即切换到权威媒体
   - 记录每个数据源访问状态（success/partial/restricted/timeout）
   - 重试机制：最大重试2次，退避延迟30秒

### 阶段3: 数据验证与质量评估
1. **真实性验证**：
   - URL验证：检查URL是否真实可访问，格式是否符合官网模式
   - 日期真实性：验证发布日期是否与来源网站一致
   - 内容一致性：检查技术细节是否合理，版本号是否符合发布规律
   - 模拟数据检测：识别过于完美或完整的信息
2. **交叉验证**：
   - 重要信息需从多个来源验证一致性
   - 版本号、发布时间、技术细节的交叉检查
   - 同一事件在多个媒体都有报道时，优先选择技术深度最高的来源
3. **质量评估**（应用通用质量评估框架）：
   - 准确性评估（30分）：信息源可信度、技术细节准确、数据支持、交叉验证
   - 深度评估（30分）：原理理解深度、工程细节、分析洞察
   - 实用性评估（20分）：工业应用价值、学习价值
   - 时效性评估（20分）：按时间衰减评分
4. **评级计算**：
   - A级：≥85分 - 高质量情报
   - B级：70-84分 - 中等质量情报
   - C级：55-69分 - 低质量情报（谨慎使用）
   - D级：<55分 - 不推荐使用

### 阶段4: 信息处理与结构化
1. **信息提取**：
   - 从原始内容提取核心信息
   - 识别技术点、创新点、关键数据
   - 生成简洁摘要（300字以内）
2. **结构化组织**：
   - 按预定义JSON格式组织信息
   - 包含所有必需字段
   - 确保字段类型和格式正确
3. **去重与筛选**：
   - 合并重复报道
   - 剔除价值过低内容（D级评分）
   - 保留高质量信息（优先A/B级）

### 阶段5: 输出生成与保存
1. **JSON生成**：创建标准化的JSON输出
2. **文件保存**：写入指定路径的输出文件
3. **完整性检查**：
   - 验证JSON可解析性
   - 检查必需字段完整性
   - 确认文件写入成功
4. **状态报告**：记录执行状态、数据质量、问题说明

### 阶段6: 错误处理与降级
1. **数据缺失处理**：
   - 搜索结果为空：返回空数组 []
   - 注明原因："无法获取今日真实数据"或"今日无重要更新"
2. **验证失败处理**：
   - 丢弃无效数据
   - 在输出中记录验证问题
   - 继续处理其他有效数据
3. **系统错误处理**：
   - 超时：记录超时状态，返回已获取数据
   - 访问限制：记录受限状态，切换数据源
   - 解析失败：记录错误，使用空结构继续

## 特定Agent工作流程扩展点

### Industry_Watcher 扩展
- **关注目标**：Tesla, 华为, Waymo等核心厂商
- **关键事件**：OTA更新、技术发布会、高管技术推文
- **技术方向**：BEV, Occupancy, End-to-End, 城市NOA

### Paper_Hunter 扩展  
- **主要来源**：arXiv (CS.CV, CS.RO), CVPR, ICCV等顶会
- **领域专注**：End-to-End Autonomous Driving, World Models, Diffusion Policy
- **质量筛选**：优先有"Project Page"或"Code Available"标记的论文

### Code_Scout 扩展
- **主要平台**：GitHub Trending, Hugging Face Spaces
- **项目分类**：仿真器、数据集、算法实现、工具链
- **优先级排序**：大厂开源项目、高星增长项目、有完整文档项目

### Chief_Analyst 扩展
- **数据整合**：读取三方情报文件，执行真实性验证
- **话题历史维护**：识别版本延续和全新话题
- **7天回顾执行**：检索7天前高优先级话题，生成深度反思

## 执行模式支持

### 并行模式（默认）
- Agent A/B/C同时执行
- Agent D等待所有任务完成后汇总
- 触发条件：`parallel_start`列表中的所有任务

### 串行模式
- 按指定顺序依次执行
- 任务依赖关系控制执行顺序
- 适用于有强依赖关系的任务

### 混合模式
- 部分并行，部分串行
- 灵活的任务依赖配置
- 平衡执行效率和资源使用

## 性能优化建议

### 搜索优化
- 关键词优化：包含具体版本号和年份
- 时间过滤：使用平台日期筛选器（"Updated this week"）
- 结果限制：控制返回数量，避免过多低质量结果

### 验证优化
- 批量验证：多个URL同时验证
- 缓存机制：重复URL避免重复验证
- 智能过滤：基于模式识别的快速过滤

### 输出优化
- 压缩输出：移除冗余字段
- 格式优化：标准化JSON结构
- 增量更新：仅更新变化部分

## 监控与日志
- **执行状态**：记录每个阶段开始/结束时间
- **数据质量**：记录评分分布、评级比例
- **问题统计**：记录各类错误发生频率
- **性能指标**：记录执行时间、数据量、成功率

## 引用方式
在Agent提示词中使用以下格式引用本工作流程：
```
## Workflow
请遵循AutoIntel-Squad通用工作流程，完整流程参见：`agents_system/common/common_workflow.md`

关键阶段：1.指令解析 2.搜索执行 3.数据验证 4.信息处理 5.输出生成 6.错误处理
```