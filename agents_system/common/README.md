# AutoIntel-Squad 共享模块

## 概述

本目录包含AutoIntel-Squad多Agent系统的共享模块，旨在减少token消耗、统一标准、提高维护效率。通过提取各Agent的共性部分，形成可复用的标准化组件。

## 模块列表

### 1. common_profile.md - 标准化Profile模板
- **用途**：提供统一的Agent Profile结构
- **包含**：基础Profile字段、核心技能框架、初始化模板
- **特点**：支持变量替换，如`{{角色名称}}`、`{{角色描述}}`

### 2. common_rules.md - 通用规则库
- **用途**：定义所有Agent必须遵守的核心规则
- **包含**：数据真实性规则、质量保障规则、容错规则
- **特点**：15条标准化规则，覆盖所有执行场景

### 3. common_workflow.md - 通用工作流程
- **用途**：定义标准化的执行工作流程
- **包含**：6阶段工作流、执行模式支持、性能优化建议
- **特点**：阶段化设计，支持并行/串行/混合模式

### 4. common_output.md - 通用输出格式标准
- **用途**：定义统一的JSON输出格式
- **包含**：基础结构、数据类型特定格式、验证规则
- **特点**：标准化元数据、验证信息、质量评分

## 使用方法

### 在Agent提示词中引用

#### 方法1：完整引用（推荐）
```markdown
# Role: Industry_Watcher (工业界情报员)

## Profile
请参考通用Profile模板：`agents_system/common/common_profile.md`

## Rules  
请遵守通用规则库：`agents_system/common/common_rules.md`

## Workflow
请遵循通用工作流程：`agents_system/common/common_workflow.md`

## 输出格式
请遵循通用输出格式标准：`agents_system/common/common_output.md`

## Agent特有配置
[此处添加该Agent特有的配置信息]
```

#### 方法2：变量化引用
```markdown
# Role: {{角色名称}} ({{角色中文名}})

{{引用:common_profile.md}}

## Agent特有技能
[该Agent特有技能描述]

{{引用:common_rules.md}}

{{引用:common_workflow.md}}

## 特有工作流扩展
[该Agent特有的工作流扩展]

{{引用:common_output.md}}

## 特有输出字段
[该Agent特有的输出字段说明]
```

### 变量替换说明

在common_profile.md中使用的变量：
- `{{角色名称}}` - Agent英文名，如"Industry_Watcher"
- `{{角色中文名}}` - Agent中文名，如"工业界情报员"
- `{{角色描述}}` - Agent功能描述
- `{{技能列表}}` - Agent特有技能列表
- `{{文件编号}}` - 输出文件编号，如"02"
- `{{类型}}` - 输出文件类型，如"industry"

## 预期收益

### Token消耗减少
| 模块 | 原估计token | 共享后token | 节省比例 |
|------|------------|-------------|----------|
| Profile部分 | ~1500 | ~300 | 80% |
| Rules部分 | ~2000 | ~500 | 75% |
| Workflow部分 | ~2500 | ~800 | 68% |
| Output部分 | ~1800 | ~600 | 67% |
| **总计** | **~7800** | **~2200** | **72%** |

### 维护效率提升
1. **集中修改**：规则更新只需修改一处，所有Agent同步生效
2. **标准化**：统一格式和标准，减少歧义
3. **一致性**：确保所有Agent遵循相同的工作流程和质量标准
4. **可扩展性**：新Agent开发只需关注特有功能

### 系统健壮性增强
1. **统一错误处理**：标准化的容错机制
2. **质量保障**：一致的验证和质量评估
3. **监控标准化**：统一的执行状态记录

## 实施指南

### 阶段1：现有Agent适配（已完成）
1. 创建共享模块目录和文件
2. 定义标准化模板和格式
3. 验证模块可用性和完整性

### 阶段2：Agent重构（待实施）
1. 修改各Agent提示词，引用共享模块
2. 移除重复内容，保留特有功能
3. 测试重构后的Agent功能

### 阶段3：优化验证（待实施）
1. 验证token消耗减少效果
2. 测试功能完整性和一致性
3. 收集性能数据，进一步优化

## 注意事项

### 版本兼容性
- 共享模块版本：1.0 (初始版)
- 对应Agent版本：2.0 (功能保全优化版)
- 更新时需确保版本兼容

### 引用完整性
- 确保所有必需模块都被正确引用
- 验证相对路径的正确性
- 测试在实际执行中的模块加载

### 特有功能保留
- 共享模块只包含通用功能
- 各Agent特有功能需在自身提示词中定义
- 避免过度通用化导致功能损失

## 示例：优化后的Agent结构

### 优化前 (Industry_Watcher)
- 文件大小：109行
- 结构：完整Profile + 完整Rules + 完整Workflow + 完整Output
- 问题：大量重复内容，token消耗高

### 优化后 (Industry_Watcher)
- 文件大小：~40行
- 结构：引用4个共享模块 + 特有配置
- 内容：特有技能 + 关注目标 + 搜索策略 + 特有字段
- 收益：token减少60-70%，维护性提升

## 故障排除

### 常见问题
1. **模块引用失败**：检查相对路径，确保文件存在
2. **变量未替换**：确认在Agent中正确设置变量值
3. **格式不一致**：遵循共享模块中的格式标准
4. **功能缺失**：确保特有功能没有被错误移除

### 验证检查清单
- [ ] 所有共享模块文件存在且可读
- [ ] Agent提示词正确引用共享模块
- [ ] 特有功能完整保留
- [ ] 输出格式符合标准
- [ ] 执行流程测试通过
- [ ] Token消耗符合预期

## 更新日志

### v1.0 (2026-01-26)
- 初始版本创建
- 包含4个核心共享模块
- 定义标准化结构和引用方式
- 提供实施指南和示例

## 联系方式

如有问题或建议，请参考项目主文档或提交Issue。

---
*AutoIntel-Squad 共享模块系统*
*设计目标：降低token消耗，提升维护效率，保证功能完整性*